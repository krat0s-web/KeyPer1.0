{% extends "maison_app/dashboard_base.html" %}
{% load static %}
{% block title %}Ajouter un Dispositif{% endblock %}
{% block page_title %}Ajouter un Dispositif{% endblock %}
{% block page_heading %}Ajouter un Dispositif IoT{% endblock %}

{% block breadcrumb %}
<ul class="breadcrumb">
    <li><a href="{% url 'dashboard' %}">Dashboard</a></li>
    /
    <li><a href="{% url 'liste_dispositifs' %}">Dispositifs</a></li>
    /
    <li><a href="#" class="active">Ajouter</a></li>
</ul>
{% endblock %}

{% block page_content %}
<div class="card-dashboard" style="border-left: 4px solid var(--success);">
    <h3 style="font-size: 24px; font-weight: 600; color: var(--dark); margin-bottom: 24px; display: flex; align-items: center; gap: 12px;">
        <i class='bx bx-plus-circle' style="color: var(--success);"></i>Nouveau Dispositif IoT
    </h3>
    
    <form method="post" style="display: flex; flex-direction: column; gap: 20px;">
        {% csrf_token %}
        
        <div>
            <label style="display: block; margin-bottom: 8px; color: var(--dark); font-weight: 500; font-size: 14px;">
                <i class='bx bx-edit'></i> Nom du dispositif <span style="color: var(--danger);">*</span>
            </label>
            <input type="text" name="nom" required maxlength="100" placeholder="Ex: Lampe salon, Thermostat cuisine..."
                   style="width: 100%; padding: 12px 16px; border: 1px solid var(--grey); border-radius: 8px; background: var(--light); color: var(--dark); outline: none; font-size: 14px;">
        </div>
        
        <div>
            <label style="display: block; margin-bottom: 8px; color: var(--dark); font-weight: 500; font-size: 14px;">
                <i class='bx bx-category'></i> Type de dispositif <span style="color: var(--danger);">*</span>
            </label>
            <select name="type" required style="width: 100%; padding: 12px 16px; border: 1px solid var(--grey); border-radius: 8px; background: var(--light); color: var(--dark); outline: none; font-size: 14px;">
                <option value="">‚Äî S√©lectionner un type ‚Äî</option>
                <option value="capteur">üì° Capteur</option>
                <option value="lampe">üí° Lampe</option>
                <option value="thermostat">üå°Ô∏è Thermostat</option>
            </select>
        </div>
        
        <div>
            <label style="display: block; margin-bottom: 8px; color: var(--dark); font-weight: 500; font-size: 14px;">
                <i class='bx bx-home'></i> Pi√®ce (optionnel)
            </label>
            <select name="id_piece" style="width: 100%; padding: 12px 16px; border: 1px solid var(--grey); border-radius: 8px; background: var(--light); color: var(--dark); outline: none; font-size: 14px;">
                <option value="">‚Äî Aucune pi√®ce ‚Äî</option>
                {% for piece in pieces %}
                <option value="{{ piece.id }}">{{ piece.nom }}</option>
                {% endfor %}
            </select>
        </div>
        
        <div>
            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="etat" {% if request.POST.etat == 'on' %}checked{% endif %} style="width: 18px; height: 18px; cursor: pointer;">
                <span style="color: var(--dark); font-weight: 500;">Dispositif allum√© par d√©faut</span>
            </label>
        </div>
        
        <div style="display: flex; gap: 12px; flex-wrap: wrap; margin-top: 24px;">
            <button type="submit" style="padding: 12px 24px; background: var(--success); color: var(--light); border: none; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 500; display: flex; align-items: center; gap: 8px; transition: all 0.3s ease;">
                <i class='bx bx-check'></i>Ajouter le dispositif
            </button>
            <a href="{% url 'liste_dispositifs' %}" style="padding: 12px 24px; background: var(--grey); color: var(--dark); border-radius: 8px; text-decoration: none; font-size: 14px; font-weight: 500; display: flex; align-items: center; gap: 8px; transition: all 0.3s ease;">
                <i class='bx bx-x'></i>Annuler
            </a>
        </div>
    </form>
</div>
{% endblock %}

