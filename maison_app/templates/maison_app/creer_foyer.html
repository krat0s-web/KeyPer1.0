{% extends "maison_app/dashboard_base.html" %}
{% load static %}
{% block page_title %}CrÃ©er un Foyer{% endblock %}
{% block page_heading %}CrÃ©er un Nouveau Foyer{% endblock %}

{% block breadcrumb %}
<ul class="breadcrumb">
    <li><a href="{% url 'dashboard' %}">Dashboard</a></li>
    /
    <li><a href="{% url 'liste_foyers' %}">Foyers</a></li>
    /
    <li><a href="#" class="active">CrÃ©er</a></li>
</ul>
{% endblock %}

{% block page_content %}
<div class="card-dashboard" style="max-width: 700px; margin: 0 auto;">
    <div style="background: linear-gradient(135deg, var(--success), #4CAF50); color: #FFFFFF; padding: 24px; border-radius: 12px 12px 0 0;">
        <h3 style="margin: 0; color: #FFFFFF !important; display: flex; align-items: center; gap: 12px; font-weight: 600;">
            <i class='bx bx-home' style="font-size: 28px; color: #FFFFFF;"></i>â• CrÃ©er un Nouveau Foyer
        </h3>
    </div>
    
    <div style="padding: 24px;">
        <!-- Messages de validation -->
        {% if messages %}
        <div style="margin-bottom: 24px;">
            {% for message in messages %}
            <div style="padding: 12px 16px; margin-bottom: 12px; border-radius: 8px; border-left: 4px solid {% if message.tags == 'error' %}var(--danger){% elif message.tags == 'success' %}var(--success){% else %}var(--primary){% endif %}; background: {% if message.tags == 'error' %}var(--light-danger){% elif message.tags == 'success' %}var(--light-success){% else %}var(--light-primary){% endif %}; color: var(--dark);">
                {{ message }}
            </div>
            {% endfor %}
        </div>
        {% endif %}

        <div style="background: var(--light-success); padding: 16px; border-radius: 12px; margin-bottom: 24px; border-left: 4px solid var(--success);">
            <i class='bx bx-info-circle' style="color: var(--success); margin-right: 8px;"></i>
            <strong style="color: var(--dark);">ğŸ’¡ Conseil :</strong> 
            <span style="color: var(--dark-grey);">Vous serez automatiquement administrateur de ce foyer et pourrez inviter d'autres membres.</span>
        </div>

        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <div style="display: grid; gap: 20px;">
                <!-- Nom du foyer -->
                <div>
                    <label style="display: block; margin-bottom: 8px; color: var(--dark); font-weight: 600; font-size: 14px;">
                        ğŸ  Nom du foyer <span style="color: var(--danger);">*</span>
                    </label>
                    <input type="text" name="nom" placeholder="Ex: Maison Dupont, Appartement T3..." required
                           style="width: 100%; padding: 12px; border: 2px solid var(--light-success); border-radius: 8px; background: var(--light); color: var(--dark); outline: none; transition: all 0.3s ease; font-size: 14px;"
                           onmouseover="this.style.borderColor='var(--success)'" 
                           onmouseout="this.style.borderColor='var(--light-success)'">
                    <small style="color: var(--dark-grey); font-size: 12px; display: block; margin-top: 4px;">Le nom doit Ãªtre unique et descriptif</small>
                </div>
                
                <!-- Description -->
                <div>
                    <label style="display: block; margin-bottom: 8px; color: var(--dark); font-weight: 600; font-size: 14px;">
                        ğŸ“ Description <small style="font-weight: normal; color: var(--dark-grey);">(optionnel)</small>
                    </label>
                    <textarea name="description" rows="3" placeholder="DÃ©crivez votre foyer : nombre de piÃ¨ces, localisation, particularitÃ©s..."
                              style="width: 100%; padding: 12px; border: 2px solid var(--light-success); border-radius: 8px; background: var(--light); color: var(--dark); outline: none; resize: vertical; transition: all 0.3s ease; font-size: 14px;"
                              onmouseover="this.style.borderColor='var(--success)'" 
                              onmouseout="this.style.borderColor='var(--light-success)'"></textarea>
                </div>
                
                <!-- Photo -->
                <div>
                    <label style="display: block; margin-bottom: 8px; color: var(--dark); font-weight: 600; font-size: 14px;">
                        ğŸ“· Photo du foyer <small style="font-weight: normal; color: var(--dark-grey);">(optionnel)</small>
                    </label>
                    <input type="file" name="photo" accept="image/*"
                           style="width: 100%; padding: 12px; border: 2px solid var(--light-success); border-radius: 8px; background: var(--light); color: var(--dark); outline: none; transition: all 0.3s ease; font-size: 14px;"
                           onmouseover="this.style.borderColor='var(--success)'" 
                           onmouseout="this.style.borderColor='var(--light-success)'">
                    <small style="color: var(--dark-grey); font-size: 12px; display: block; margin-top: 4px;">JPG, PNG (max 5MB)</small>
                </div>

                <!-- Boutons d'action -->
                <div style="display: flex; gap: 12px; margin-top: 20px;">
                    <button type="submit" style="flex: 1; padding: 14px 24px; background: linear-gradient(135deg, var(--success), #4CAF50); color: var(--light); border: none; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 16px; display: flex; align-items: center; justify-content: center; gap: 8px; transition: all 0.3s ease;"
                            onmouseover="this.style.transform='scale(1.02)'" 
                            onmouseout="this.style.transform='scale(1)'">
                        <i class='bx bx-check-circle'></i>âœ… CrÃ©er le foyer
                    </button>
                    <a href="{% url 'liste_foyers' %}" style="flex: 1; padding: 14px 24px; background: var(--grey); color: var(--dark); border: none; border-radius: 8px; text-decoration: none; font-weight: 600; font-size: 16px; display: flex; align-items: center; justify-content: center; gap: 8px; transition: all 0.3s ease;"
                       onmouseover="this.style.opacity='0.8'" 
                       onmouseout="this.style.opacity='1'">
                        <i class='bx bx-x-circle'></i>âŒ Annuler
                    </a>
                </div>
            </div>
        </form>
    </div>
</div>
{% endblock %}
